log:
  disabled: false
  level: warn
  timestamp: true
experimental:
  clash_api:
    external_controller: 0.0.0.0:20123
    external_ui: ui
    secret: ""
    external_ui_download_url: https://ghfast.top/https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip
    external_ui_download_detour: 🎯 全球直连
    default_mode: rule
  cache_file:
    enabled: true
    path: cache.db
    store_fakeip: true
dns:
  fakeip:
    enabled: true
    inet4_range: 198.18.0.0/15
    inet6_range: fc00::/18
  servers:
    - { tag: ali-dns-udp, address: 223.5.5.5 }
    - { tag: googlg-dns-udp, address: 8.8.8.8 }
    - { tag: Direct-dns, address_resolver: ali-dns-udp, address: https://dns.alidns.com/dns-query, detour: 🎯 全球直连, strategy: ipv4_only }
    - { tag: Proxy-dns, address_resolver: googlg-dns-udp, address: https://dns.google/dns-query, detour: 🚀 节点选择, strategy: prefer_ipv4 }
    - { tag: fakeip, address: fakeip }
  rules:
    - { outbound: any, server: Direct-dns }
    - { clash_mode: direct, server: Direct-dns }
    - { clash_mode: global, server: Proxy-dns }
    - { rule_set: [ cn, private, fakeip_filter ], server: Direct-dns }
    - { query_type: [ A, AAAA ], server: fakeip, rewrite_ttl: 1 }
  final: Proxy-dns
  client_subnet: 223.5.5.5
  independent_cache: true
inbounds:
  - { tag: tun-in, type: tun, address: [ 172.19.0.1/30, fdfe:dcba:9876::1/126 ], mtu: 9000, stack: system, auto_route: true }
  - { tag: mixed-in, type: mixed, listen: 0.0.0.0, listen_port: 20120 }
outbounds:
  - { tag: 🎯 全局直连, type: direct }
  - { tag: 🚫 拒绝连接, type: block }
  - { type: selector, tag: 🚀 节点选择, outbounds: [ 🎈 自动选择, 🟢 手动选择, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: 🟢 手动选择, outbounds: [], filter: [ { action: all, keywords: [ "" ] } ] }
  - { type: selector, tag: 🎯 全球直连, outbounds: [ 🎯 全局直连, 🚀 节点选择 ] }
  - { type: selector, tag: 🪧 广告拦截, outbounds: [ 🚫 拒绝连接, 🎯 全局直连, 🚀 节点选择 ] }
  - { type: urltest, tag: 🎈 自动选择, url: https://www.gstatic.com/generate_204, interval: 3m, tolerance: 150, outbounds: [], filter: [ { action: all, keywords: [ "" ] } ] }
  - { type: selector, tag: apple, outbounds: [ 🎯 全局直连, 🚀 节点选择, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: appletv, outbounds: [ 🎯 全局直连, 🚀 节点选择, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: bilibili, outbounds: [ 🎯 全局直连, 🚀 节点选择, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: disney, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: 国际游戏, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: 国内游戏, outbounds: [ 🎯 全局直连, 🚀 节点选择, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: 国际媒体, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: 微软服务, outbounds: [ 🎯 全局直连, 🚀 节点选择, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: netflix, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: speedtest, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: openai, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: 亚马逊TV, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: spotify, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: telegram, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: tiktok, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: selector, tag: youtube, outbounds: [ 🚀 节点选择, 🎯 全局直连, 🇭🇰 香港自动, 🇹🇼 台湾自动, 🇯🇵 日本自动, 🇺🇸 美国自动, 🇸🇬 新加坡自动, 🇩🇪 德国自动 ] }
  - { type: urltest, tag: 🇭🇰 香港自动, url: https://www.gstatic.com/generate_204, interval: 3m, tolerance: 150, outbounds: [], filter: [ { action: include, keywords: [ "🇭🇰|\bHK\b|香港|Hong Kong" ] } ] }
  - { type: urltest, tag: 🇹🇼 台湾自动, url: https://www.gstatic.com/generate_204, interval: 3m, tolerance: 150, outbounds: [], filter: [ { action: include, keywords: [ "🇹🇼|\bTW\b|台湾|Taiwan|Tai wan" ] } ] }
  - { type: urltest, tag: 🇯🇵 日本自动, url: https://www.gstatic.com/generate_204, interval: 3m, tolerance: 150, outbounds: [], filter: [ { action: include, keywords: [ "🇯🇵|\bJP\b|日本|Japan" ] } ] }
  - { type: urltest, tag: 🇺🇸 美国自动, url: https://www.gstatic.com/generate_204, interval: 3m, tolerance: 150, outbounds: [], filter: [ { action: include, keywords: [ "🇺🇸|\bUS\b|美国|United States|CT" ] } ] }
  - { type: urltest, tag: 🇸🇬 新加坡自动, url: https://www.gstatic.com/generate_204, interval: 3m, tolerance: 150, outbounds: [], filter: [ { action: include, keywords: [ "🇸🇬|\bSG\b|新加坡|Singapore" ] } ] }
  - { type: urltest, tag: 🇩🇪 德国自动, url: https://www.gstatic.com/generate_204, interval: 3m, tolerance: 150, outbounds: [], filter: [ { action: include, keywords: [ "🇩🇪|\bDE\b|德国|Germany" ] } ] }
route:
  auto_detect_interface: true
  final: 🚀 节点选择
  rules:
    - { action: sniff }
    - { type: logical, mode: or, rules: [ { port: 53 }, { protocol: dns } ], action: hijack-dns }
    - { ip_is_private: true, outbound: 🎯 全球直连 }
    - { clash_mode: direct, outbound: 🎯 全球直连 }
    - { clash_mode: global, outbound: 🚀 节点选择 }
    - { rule_set: [ Ads ], outbound: 🪧 广告拦截 }
    - { rule_set: [ private, private_ip, cn_ip, fakeip_filter ], outbound: 🎯 全球直连 }
    - { rule_set: [ apple_cn ], outbound: apple }
    - { rule_set: [ appletv ], outbound: appletv }
    - { rule_set: [ bilibili ], outbound: bilibili }
    - { rule_set: [ disney ], outbound: disney }
    - { rule_set: [ games, games_ip ], outbound: 国际游戏 }
    - { rule_set: [ games_cn ], outbound: 国内游戏 }
    - { rule_set: [ media, media ], outbound: 国际媒体 }
    - { rule_set: [ microsoft_cn ], outbound: 微软服务 }
    - { rule_set: [ netflix, netflix_ip ], outbound: netflix }
    - { rule_set: [ networktest ], outbound: speedtest }
    - { rule_set: [ openai ], outbound: openai }
    - { rule_set: [ primevideo ], outbound: 亚马逊TV }
    - { rule_set: [ spotify ], outbound: spotify }
    - { rule_set: [ telegram_ip ], outbound: telegram }
    - { rule_set: [ tiktok ], outbound: tiktok }
    - { rule_set: [ youtube ], outbound: youtube }
  rule_set:
    - { tag: apple_cn, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/apple-cn.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: appletv, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/appletv.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: Ads, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/ads.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: bilibili, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/bilibili.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: cn, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/cn.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: cn_ip, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/cnip.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: disney, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/disney.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: fakeip_filter, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/fakeip-filter.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: games, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/games.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: games_cn, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/games-cn.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: games_ip, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/gamesip.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: media, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/media.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: media_ip, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/mediaip.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: microsoft_cn, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/microsoft-cn.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: netflix, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/netflix.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: netflix_ip, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/netflixip.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: networktest, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/networktest.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: openai, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/ai.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: primevideo, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/primevideo.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: private, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/private.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: private_ip, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/privateip.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: spotify, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/spotify.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: telegram_ip, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/telegramip.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: tiktok, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/tiktok.srs, format: binary, download_detour: 🚀 节点选择 }
    - { tag: youtube, type: remote, url: https://testingcf.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-ruleset/youtube.srs, format: binary, download_detour: 🚀 节点选择 }
